%script{:src => "http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAzr2EBOXUKnm_jVnk0OJI7xSosDVG8KKPE1-m51RBrvYughuyMxQ-i1QfUnH94QxWIa6N4U6MouMmBA", :type => "text/javascript"}
%script{:type => "text/javascript"}
  function initialize() {
  if (GBrowserIsCompatible()) {
  var map = new GMap2(document.getElementById("map_canvas"));
  map.setCenter(new GLatLng(37.4419, -122.1419), 1);

  - User.all.select{ |u| u.latitude.present? and u.longitude.present? }.each do |user|
    = "map.addOverlay(new GMarker(new GLatLng(#{user.latitude}, #{user.longitude})));"
  }
  }
  $(document).ready(initialize);
#map_canvas{:style => "width: 500px; height: 300px"}

