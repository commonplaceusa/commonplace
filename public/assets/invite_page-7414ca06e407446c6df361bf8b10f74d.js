var InvitePage=CommonPlace.View.extend({template:"invite_page/main",track:!0,page_name:"invite",afterRender:function(){this.$("input[placeholder], textarea[placeholder]").placeholder()},events:{"click a.find-on-facebook-button":"findOnFacebook","click a.share-on-facebook-button":"shareOnFacebook","click a.import-contacts-from-email-button":"importContacts","submit form.send-invites":"sendInvites"},findOnFacebook:function(a){a.preventDefault(),FB.login(function(){FB.ui({method:"apprequests",message:$(a.target).attr("data-message"),data:$(a.target).attr("data-slug"),display:"iframe"})},{perms:"read_stream,publish_stream,offline_access"})},shareOnFacebook:function(a){a.preventDefault();var b=$(a.target);FB.ui({method:"feed",name:b.attr("data-name"),link:b.attr("data-url"),picture:b.attr("data-picture"),caption:b.attr("data-caption"),description:b.attr("data-description"),message:b.attr("data-message")},$.noop)},importContacts:function(a){a.preventDefault(),showPlaxoABChooser("invite_emails","/plaxo-importer.html")},sendInvites:function(a){a.preventDefault();var b=this.$("form.send-invites");$.ajax({type:"POST",dataType:"json",url:"/api"+CommonPlace.community.link("invites"),data:JSON.stringify({emails:$("[name=email]",b).val().split(/,\s*/),message:$("[name=body]",b).val()}),success:function(){$("[name=email]",b).val(""),$("[name=body]",b).val(""),$("p.confirm",b).show().delay(1e3).fadeOut()}})},bind:function(){$("body").addClass("invite")},unbind:function(){$("body").removeClass("invite")}});